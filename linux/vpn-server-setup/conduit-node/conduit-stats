#!/bin/bash

# 1. Clear the screen for a fresh look
clear

# 2. Show the Header
echo -e "\n\033[1;36m============================================================\033[0m"
echo -e "\033[1;32m      üê≥ CONDUIT NODE HEALTH SNAPSHOT               \033[0m"
echo -e "\033[1;36m============================================================\033[0m"
echo ""

# 3. Show Docker Stats (Snapshot, No Stream)
# Formatted to be readable
docker stats conduit --no-stream --format "table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}\t{{.MemPerc}}"

echo ""
echo -e "\033[1;33m------------------------------------------------------------\033[0m"
echo -e "\033[1;33m      üìú STARTING LIVE LOG STREAM (Press Ctrl+C to exit) \033[0m"
echo -e "\033[1;33m------------------------------------------------------------\033[0m"
echo ""

# 4. Stream the logs
# The -f flag keeps it open. We also tail the last 20 lines to give context immediately.
docker logs -f --tail 20 conduit
