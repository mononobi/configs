#!/bin/bash

gdbus monitor -y -d org.freedesktop.login1 | grep --line-buffered "'LockedHint': <true>" | \
(
    while true; do
        read IS_LOCKED
        if [ "$IS_LOCKED" != "" ]
        then
          sleep 0.5
          busctl --user set-property org.gnome.Mutter.DisplayConfig \
          /org/gnome/Mutter/DisplayConfig \
          org.gnome.Mutter.DisplayConfig PowerSaveMode i 1
        fi
    done
)
